<!DOCTYPE html>
<html\>

<head>
    <style>
        canvas {
            border: 1px solid blue;
            background-color: white;
        }
    </style>
</head>

<body onload="startGame()">
    <script>
       function startGame() {
           myGameArea.start();
           // myGamePiece = new component(30, 30, 'red', 10, 120, "rect");
           // myGamePiece = new component(30, 30, "avatar.png", 10, 120, "rect");
            myGamePiece = new component(30, 30, "images/smiley gif.gif", 10, 120, "image");
        } 
           
        var myGameArea = {
            canvas : document.createElement("canvas"),
            start : function() {
                this.canvas.width = 480;
                this.canvas.height = 270;
                this.context = this.canvas.getContext("2d");
                document.body.insertBefore(this.canvas, document.body.childNodes[0]);
            
                document.addEventListener('keydown', changePos);
                this.interval = setInterval(updateGameArea, 20);

            },
            clear: function(){
                this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
            }      
        }

        function updateGameArea(){
            myGameArea.clear();
            myGamePiece.newPos();
            myGamePiece.angle += 1 * Math.PI / 180;
            myGamePiece.update();
        }

        function changePos(event){
            switch(event.keyCode){
            case 38:
                    myGamePiece.speedY = -5;
                break;
            case 40:
                    myGamePiece.speedY = 5;
                break;
            case 37:
                    myGamePiece.speedX = -5;
                break;
            case 39:
                    myGamePiece.speedX = 5;
                break;
            }

        }
    var myGamePiece;

    function component(width, height, color, x, y, type){
        this.with = width;
        this.height = height;
        this.x = x;
        this.y = y;
        this.angle = 0;
        this.type = type;

        this.speedX = 0;
        this.speedY = 0;
         
        this.newPos = function(){
            this.x += this.speedX;
            this.y += this.speedY;
        
            this.speedX = 0;
            this.speedY = 0;
        }
        
        this.update = function() {
            ctx = myGameArea.context;
            
            ctx.save();
            ctx.translate(x,y);
            ctx.rotate(this.angle);
            
            if(type == "image"){
                this.image = new Image();
                this.image.src = color;
                //ctx.drawImage(this.image, this.x, this.y, width, height);
                ctx.drawImage(this.image, width / -2, height / -2, width, height)
            }else {
                ctx.fillStyle = color;
                //ctx.fillRect(x, y, width, height);
                ctx.fillRect(width / -2,height / -2, witdth, height);
            }
            ctx.restore();
        }  
    }

    </script>
    <img src="images/smiley gif.gif" style= "width: 30px; height: 30px;" />
</body>

</html>